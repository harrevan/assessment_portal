<!DOCTYPE html>
<html lang="en">
<head>
  <title>Assessment Portal</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script>
  	  function displayStudents(time) {
  	  	var classTime = time;
  	  	console.log(classTime);
  	  	var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
            var studentName = JSON.parse(this.responseText);
            console.log(this.responseText);
            console.log(studentName[0].upper);

            createList(classTime, studentName);

            //



            }
        };
        xhttp.open("GET", "/students?time=" + classTime, true);
        xhttp.send();

      }

      function createList(time, studentName){
      	// Clear any existing content first
      	document.getElementById("student_list").innerHTML = "";
      	var title = document.createElement("H1");
      	title.innerHTML = time + " Students";
      	document.getElementById("student_list").appendChild(title);

      	//Create list of students
/*      	var but = document.createElement("BUTTON");
      	but.setAttribute("id", "students");
      	but.className = "list-group-item list-group-item-action";
      	document.getElementById("student_list").appendChild(ul);
      	for(var i  = 0; i < studentName.length; i++){
      		var li = document.createElement("LI");
      		li.innerHTML = studentName[i].upper;
      		console.log(studentName[i].upper);
      		document.getElementById("students").appendChild(li);
      	}*/
      	for(var i  = 0; i < studentName.length; i++){
      		var but = document.createElement("BUTTON");
      		but.setAttribute("id", "student" + i);
      		but.className = "list-group-item list-group-item-action";
      		but.innerHTML = studentName[i].upper;
      		document.getElementById("student_list").appendChild(but);
      	}
      }
  </script>





</head>
<body>

<div class="container-fluid">
  <div class="jumbotron">
    <h1 style="text-align:center;">Kindergarten Assessment Portal</h1>
  </div>
</div>

<div class="container-fluid">
  <form>	
    <div class="form-group">
  	  <button class="btn btn-primary" id="class" name="time" type="button" onclick="displayStudents('AM')" value="AM">AM Class</button>
  	  <button class="btn btn-primary" id="class" name="time" type="button" onclick="displayStudents('PM')" value="PM">PM Class</button>
    </div>
  </form>
  <div class="row">
    <div class="col-sm-4 list-group">
      <div id="student_list"></div>
    </div>
    <div class="col-sm-4">
    <!-- Individual student data here -->
      <h1> Individual Student Data</h1>
    </div>
    <div class="col-sm-4">
      <!-- Class data here -->
      <h1>Class Data</h1>
    </div>    
  </div>
</div>
</body>
</html>
